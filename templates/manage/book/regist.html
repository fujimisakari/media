{% extends 'base.html' %}
{% load url from future %}

{% block contents %}

<div class="box">
    <div class="boxHeader">
        <h2 style="float: left;">BOOK管理</h2>
        <ul class="boxTabs" style="float: right;">
            <li><a href="{% url 'manage_book_index' set_type %}">一覧</a></li>
            <li><a class="default-tab">登録</a></li>
        </ul>
    </div>

    <div class="boxContent">
            <h3><span>{{ title }}登録</span></h3>

            {% if is_form_error %}
				<div class="error notification">
					<div>
						正しく入力されていない項目があります
					</div>
				</div>
			{% endif %}

            <form method="post">
                {{ formset.management_form }}
                <fieldset>
                    <div class="UpBox clearfix">
                        {% for form in formset %}
                            {% if set_type == 'book' %}
				                <dl>
				                    <dt>
				                        <label>カテゴリ</label>
                                        {% if form.category_id.errors %}
                                            <span class='error_msg'>
							        	        {{ form.category_id.errors }}
							        	    </span>
                                        {% endif %}
				                    </dt>
				                    <dd>
                                        <select id="id_category" name="form-0-category_id">
                                            <option selected="selected" value="">---------</option>
                                            {% for category in category_list %}
                                                <option value="{{ category.id }}">{{ category.name }}</option>
                                            {% endfor %}
                                        </select>
				                    </dd>
				                    <dt>
				                        <label>サブカテゴリ</label>
                                        {% if form.subcategory_id.errors %}
                                            <span class='error_msg'>
							        	        {{ form.subcategory_id.errors }}
							        	    </span>
                                        {% endif %}
				                    </dt>
				                    <dd>
                                        <select id="id_subcategory" name="form-0-subcategory_id">
                                            <option selected="selected" value="">---------</option>
                                        </select>
				                    </dd>
				                    <dt>
				                        <label>タイトル</label>
                                        {% if form.title.errors %}
                                            <span class='error_msg'>
                                                {{ form.title.errors }}
                                            </span>
                                        {% endif %}
				                    </dt>
				                    <dd>
                                        {{ form.title }}
				                    </dd>
				                </dl>
                            {% endif %}

                            {% if set_type == 'detail' %}
				                <dl>
				                    <dt>
				                        <label>カテゴリ</label>
                                        {% if form.category_id.errors %}
                                            <span class='error_msg'>
							        	        {{ form.category_id.errors }}
							        	    </span>
                                        {% endif %}
				                    </dt>
				                    <dd>
                                        <select id="id_category" name="form-0-category_id">
                                            <option selected="selected" value="">---------</option>
                                            {% for category in category_list %}
                                                <option value="{{ category.id }}">{{ category.name }}</option>
                                            {% endfor %}
                                        </select>
				                    </dd>
				                    <dt>
				                        <label>サブカテゴリ</label>
                                        {% if form.subcategory_id.errors %}
                                            <span class='error_msg'>
							        	        {{ form.subcategory_id.errors }}
							        	    </span>
                                        {% endif %}
				                    </dt>
				                    <dd>
                                        <select id="id_subcategory" name="form-0-subcategory_id">
                                            <option selected="selected" value="">---------</option>
                                        </select>
				                    </dd>
				                    <dt>
				                        <label>タイトル</label>
                                        {% if form.book_id.errors %}
                                            <span class='error_msg'>
							        	        {{ form.book_id.errors }}
							        	    </span>
                                        {% endif %}
				                    </dt>
				                    <dd>
                                        <select id="id_book" name="form-0-book_id">
                                            <option selected="selected" value="">---------</option>
                                        </select>
				                    </dd>
				                    <dt>
				                        <label>巻</label>
                                        {% if form.volume.errors %}
                                            <span class='error_msg'>
							        	        {{ form.volume.errors }}
							        	    </span>
                                        {% endif %}
				                    </dt>
				                    <dd>
                                        <select id="id_volume" name="form-0-volume">
                                            <option selected="selected" value="">---------</option>
                                        </select>
				                    </dd>
				                    <dt>
				                        <label>PDFサイズ</label>
                                        {% if form.pdf_size.errors %}
                                            <span class='error_msg'>
							        	        {{ form.pdf_size.errors }}
							        	    </span>
                                        {% endif %}
				                    </dt>
				                    <dd>
                                        {{ form.pdf_size }}
				                    </dd>
				                    <dt>
				                        <label>ページ数</label>
                                        {% if form.total_page.errors %}
                                            <span class='error_msg'>
							        	        {{ form.total_page.errors }}
							        	    </span>
                                        {% endif %}
				                    </dt>
				                    <dd>
                                        {{ form.total_page }}
				                    </dd>
				                    <dt>
				                        <label>著者名</label>
                                        {% if form.writer_id.errors %}
                                            <span class='error_msg'>
							        	        {{ form.writer_id.errors }}
							        	    </span>
                                        {% endif %}
				                    </dt>
				                    <dd>
                                        <select id="id_writer" name="form-0-writer_id">
                                            <option selected="selected" value="">---------</option>
                                        </select>
				                    </dd>
				                    <dt>
				                        <label>出版社名</label>
                                        {% if form.publisher_id.errors %}
                                            <span class='error_msg'>
							        	        {{ form.publisher_id.errors }}
							        	    </span>
                                        {% endif %}
				                    </dt>
				                    <dd>
                                        <select id="id_publisher" name="form-0-publisher_id">
                                            <option selected="selected" value="">---------</option>
                                        </select>
				                    </dd>
				                    <dt>
				                        <label>備考</label>
                                        {% if form.description.errors %}
                                            <span class='error_msg'>
							        	        {{ form.description.errors }}
							        	    </span>
                                        {% endif %}
				                    </dt>
				                    <dd>
                                        {{ form.description }}
				                    </dd>
				                </dl>
                            {% endif %}

                            {% if set_type == 'category' %}
				                <dl>
				                    <dt>
				                        <label>カテゴリ名</label>
                                        {% if form.name.errors %}
                                            <span class='error_msg'>
                                                {{ form.name.errors }}
                                            </span>
                                        {% endif %}
				                    </dt>
				                    <dd>
                                        {{ form.name }}
				                    </dd>
				                    <dt>
				                        <label>表示優先度</label>
                                        {% if form.sort.errors %}
                                            <span class='error_msg'>
							        	        {{ form.sort.errors }}
							        	    </span>
                                        {% endif %}
				                    </dt>
				                    <dd>
                                        {{ form.sort }}
				                    </dd>
				                </dl>
                            {% endif %}

                            {% if set_type == 'subcategory' %}
				                <dl>
				                    <dt>
				                        <label>カテゴリ</label>
                                        {% if form.category_id.errors %}
                                            <span class='error_msg'>
							        	        {{ form.category_id.errors }}
							        	    </span>
                                        {% endif %}
				                    </dt>
				                    <dd>
                                        <select id="id_category" name="form-0-category_id">
                                            {% for category in category_list %}
                                                <option value="{{ category.id }}">{{ category.name }}</option>
                                            {% endfor %}
                                        </select>
				                    </dd>
				                    <dt>
				                        <label>サブカテゴリ名</label>
                                        {% if form.name.errors %}
                                            <span class='error_msg'>
                                                {{ form.name.errors }}
                                            </span>
                                        {% endif %}
				                    </dt>
				                    <dd>
                                        {{ form.name }}
				                    </dd>
				                    <dt>
				                        <label>表示優先度</label>
                                        {% if form.sort.errors %}
                                            <span class='error_msg'>
							        	        {{ form.sort.errors }}
							        	    </span>
                                        {% endif %}
				                    </dt>
				                    <dd>
                                        {{ form.sort }}
				                    </dd>
				                </dl>
                            {% endif %}

                            {% if set_type == 'writer' %}
				                <dl>
				                    <dt>
				                        <label>カテゴリ</label>
                                        {% if form.category_id.errors %}
                                            <span class='error_msg'>
							        	        {{ form.category_id.errors }}
							        	    </span>
                                        {% endif %}
				                    </dt>
				                    <dd>
                                        <select id="id_category" name="form-0-category_id">
                                            {% for category in category_list %}
                                                <option value="{{ category.id }}">{{ category.name }}</option>
                                            {% endfor %}
                                        </select>
				                    </dd>
				                    <dt>
				                        <label>著者</label>
                                        {% if form.name.errors %}
                                            <span class='error_msg'>
                                                {{ form.name.errors }}
                                            </span>
                                        {% endif %}
				                    </dt>
				                    <dd>
                                        {{ form.name }}
				                    </dd>
				                </dl>
                            {% endif %}

                            {% if set_type == 'publisher' %}
				                <dl>
				                    <dt>
				                        <label>カテゴリ</label>
                                        {% if form.category_id.errors %}
                                            <span class='error_msg'>
							        	        {{ form.category_id.errors }}
							        	    </span>
                                        {% endif %}
				                    </dt>
				                    <dd>
                                        <select id="id_category" name="form-0-category_id">
                                            {% for category in category_list %}
                                                <option value="{{ category.id }}">{{ category.name }}</option>
                                            {% endfor %}
                                        </select>
				                    </dd>
				                    <dt>
				                        <label>出版社</label>
                                        {% if form.name.errors %}
                                            <span class='error_msg'>
                                                {{ form.name.errors }}
                                            </span>
                                        {% endif %}
				                    </dt>
				                    <dd>
                                        {{ form.name }}
				                    </dd>
				                </dl>
                            {% endif %}

                        {% endfor %}
				    </div>
                    <p class="center">
                        <input type="submit" class="submitA submitL" value="登録する" tabindex="23" onclick="this.form.action='{% url 'manage_book_regist' set_type %}'" />
                    </p>
                </fieldset>
            </form>
        </div>
    </div>
</div>

{% endblock %}


{% comment %}
{% block manageContentsMain %}
    {% if getForm %}
        <div class="addSection">
            {% if id %}
                <div class="manageMode"><a href="{% url 'manage_book_add' set_type %}">add</a> / <a href="{% url 'manage_book_edit_list' set_type %}">edit</a></div>
            {% else %}
                <div class="manageMode">add / <a href="{% url 'manage_book_edit_list' set_type %}">edit</a></div>
            {% endif %}
            <form method="post">
                <table class="manageAdd">
                    {% if set_type == 'book' or set_type == 'detail' %}
                        <tr>
                            <th><label for="id_category">カテゴリ</label></th>
                            <td>
                                <select id="id_category">
                                    <option selected="selected" value="">---------</option>
                                    {% for category in category_list %}
                                        <option value="{{ category.id }}">{{ category.name }}</option>
                                    {% endfor %}
                                </select>
                            </td>
                        </tr>
                        <tr>
                            <th><label for="id_subcategory">サブカテゴリ</label></th>
                            <td>
                                <select id="id_subcategory">
                                    <option selected="selected" value="">---------</option>
                                    {% for subcategory in subcategory_list %}
                                        <option value="{{ subcategory.id }}">{{ subcategory.name }}</option>
                                    {% endfor %}
                                </select>
                            </td>
                        </tr>
                    {% endif %}
                    {{ getForm.as_table }}
                </table>
                <table class="manageButton">
                    <tr>
                        <td>
                        <input class="button" type="submit" value="ENTER" onclick="this.form.action='.'" />
                        {% if id %}<input class="button" type="submit" value="DERETE" onclick="this.form.action='./delete/'" />{% endif %}
                        </td>
                    </tr>
                </table>
            </form>
        </div>
    {% endif %}
{% endblock %}
{% endcomment %}
